{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useRef, useState, useEffect } from \"react\";\nimport RingLoader from \"react-spinners/RingLoader\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport { nanoid } from \"nanoid\";\nimport styles from \"./Search.module.css\";\nimport { origin } from \"../../../utils/constants\";\n\nconst search = require(\"../../../public/Assets/search.svg\");\n\nconst javaScriptIcon = require(\"../../../public/Assets/JavaScript-logo.png\");\n\nconst reactIcon = require(\"../../../public/Assets/physics.png\");\n\nconst categoriesIcons = {\n  \"java script\": javaScriptIcon,\n  react: reactIcon\n};\n\nconst Search = () => {\n  const searchRef = useRef();\n  const {\n    0: posts,\n    1: setPosts\n  } = useState([]);\n  const {\n    0: noPosts,\n    1: setNoPosts\n  } = useState(false);\n  const {\n    0: showSuggestions,\n    1: setShowSuggestions\n  } = useState(false);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  const handleExpandSearchBar = e => {\n    let newWidth = \"22vw\";\n    if (window.innerWidth <= 800) newWidth = \"42vw\";\n    searchRef.current.style.width = newWidth;\n  };\n\n  const handleDecreaseSearchBar = e => {\n    let newWidth = \"20vw\";\n    if (window.innerWidth <= 800) newWidth = \"40vw\";\n    searchRef.current.style.width = newWidth;\n  };\n\n  const handleSearch = async e => {\n    const {\n      value\n    } = e.target;\n    setLoading(prev => true);\n\n    try {\n      const res = await axios.get(`${origin}/blogs/get?search=${value}`);\n      const posts = res.data.data.length ? res.data.data : [];\n      setPosts(pre => posts);\n      setLoading(prev => false);\n      setShowSuggestions(prev => true);\n      if (posts.length === 0) setNoPosts(prev => true);\n    } catch (err) {\n      console.log(err);\n      setLoading(prev => false);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"click\", e => {\n      if (e.target.id !== \"suggestions\" || e.target.parentElement.id !== \"suggestions\") {\n        setShowSuggestions(prev => false);\n      }\n    });\n  }); //categories\n  //react, node, java script, web assembly, books, crypto-currency\n  //others\n\n  let noSearchPlaceHolder;\n\n  if (!posts.length) {\n    noSearchPlaceHolder = /*#__PURE__*/_jsx(RingLoader, {\n      size: 30,\n      color: \"#fff\",\n      css: \"margin-right: 1.5rem\"\n    });\n\n    if (noPosts) {\n      noSearchPlaceHolder = /*#__PURE__*/_jsx(\"h3\", {\n        style: {\n          margin: \"0\",\n          margin: \"0.5rem\"\n        },\n        children: \"No Post Was Found \\uD83D\\uDC35\"\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.Search,\n    ref: searchRef,\n    children: [loading ? /*#__PURE__*/_jsx(RingLoader, {\n      size: 30,\n      color: \"#fff\",\n      css: \"margin-right: 1.5rem\"\n    }) : /*#__PURE__*/_jsx(\"img\", {\n      className: styles.searchIcon,\n      src: search\n    }), /*#__PURE__*/_jsx(\"input\", {\n      type: \"text\",\n      placeholder: \"type here\",\n      onFocus: handleExpandSearchBar,\n      onBlur: handleDecreaseSearchBar,\n      onChange: handleSearch\n    }), showSuggestions && /*#__PURE__*/_jsx(\"div\", {\n      className: styles.Suggestions,\n      id: \"suggestions\",\n      children: !posts.length ? noSearchPlaceHolder : /*#__PURE__*/_jsxs(_Fragment, {\n        children: [posts.map(pst => /*#__PURE__*/_jsx(Link, {\n          href: `/post/${pst.slug}`,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.Suggestion,\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: categoriesIcons[pst.category],\n              alt: \"category\"\n            }), /*#__PURE__*/_jsx(\"h5\", {\n              children: pst.title\n            })]\n          }, pst._id)\n        }, nanoid())), posts.length > 2 && /*#__PURE__*/_jsx(\"div\", {\n          className: styles.Suggestion,\n          style: {\n            justifyContent: \"center\"\n          },\n          children: /*#__PURE__*/_jsx(\"h5\", {\n            children: \"Show All\"\n          })\n        })]\n      })\n    })]\n  });\n};\n\nexport default Search;","map":null,"metadata":{},"sourceType":"module"}