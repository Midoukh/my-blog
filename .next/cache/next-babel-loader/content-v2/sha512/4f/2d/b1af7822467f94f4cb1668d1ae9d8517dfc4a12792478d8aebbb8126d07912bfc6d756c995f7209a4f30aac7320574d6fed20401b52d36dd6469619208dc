{"ast":null,"code":"import { writeClient } from \"../../lib/sanityClient\";\nexport default ((req, res) => {\n  return new Promise(resolve => {\n    const body = req.body;\n    const _id = body.commentId;\n    const reactions = body.reactions;\n    reactions.forEach(r => r._key = r.label);\n    const query = `*[_type == \"commentReactions\" && commentId == \"${_id}\"]{_id}[0]`;\n    writeClient.fetch(query).then(comment => {\n      if (comment) {\n        writeClient.patch(comment._id).set({\n          reactions: reactions\n        }).commit().then(() => {\n          resolve(res.status(200).end());\n        });\n      } else {\n        writeClient.create({\n          _type: \"commentReactions\",\n          commentId: _id,\n          reactions: reactions\n        }).then(() => {\n          resolve(res.status(200).end());\n        });\n      }\n    });\n  });\n});","map":null,"metadata":{},"sourceType":"module"}